---
layout: post
title: "Http, Cookie, Session"
date: 2019-12-26 19:30:00 +0000
description: Http 그리고 쿠키와 세션이란
categories: devinfo
tags: Http Cookie Session Web Protocol
---

### HTTP(HyperText Transfer Protocol)란?

Web 상에서 데이터를 주고 받도록 지원하는 프로토콜 형식이다. HyperText란 의미에 맞게 주로 HTML(HyperText Markup Language) 문서를 주고 받기 위해 쓰인다. TCP와 UDP를 모두 사용하는 프로토콜이다. 초기에 GET 방식만을 사용해서 서버로 부터의 응답은 모두 HTML이었으나, 현대에 들어서 확장되어 사용되어진다. 웹상에서 웹브라우저와 서버 사이에 전송 프로토콜이라 생각하면 될것 같다.

<br>

### HTTP 특징

- 메시지 전달방식은 ASCII
- http: 로 시작하는 URL 조회 방식
- 메소드 전달 방식(GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH)
- 무상태성(Stateless)

<br>

### Cookie란?

HTTP의 특징 중 하나인 무상태성으로 인해 사용자 컴퓨터의 상태를 저장하기 위해서 만들어졌다. 웹사이트에 방문하게 되면 서버에서 만들어져 사용자 컴퓨터에 저장되는 정보 파일로써 웹사이트에 방문할때마다 수시로 변경되며 사용자 계정정보, 방문정보 등이 기록으로 남는다.

<br>

### Cookie의 특징

- 키와 값으로 구성되어진 정보로 이름, 값, 만료날짜(쿠키 저장기간), 경로 정보가 저장됨
- 보안에 취약(스파이웨어를 통해 유저의 브라우징 행동을 추적 가능, 쿠키를 훔쳐서 사용자의 웹 계정 접근권한을 획득 가능)
- 요청마다 쿠키를 헤더에 추가하여 보내기 때문에 트래픽 유발
- 장비구니, 방문한 사이트 설정 정보 등에 주로 사용
- 클라이언트에 300개까지 쿠키저장 가능, 하나의 도메인당 20개의 값만 가질 수 있음, 하나의 쿠키값은 4KB까지저장
- 사용자 컴퓨터에 저장된 파일 정보를 사용하기 때문에 웹사이트 방문시 처리가 빠름
- 브라우저가 종료되어도 만료기간이 남아있다면 로컬에 남음

<br>

### Cookie의 동작방식

1. 클라이언트의 웹 사이트 요청
2. 서버에서 쿠키를 생성하고 HTTP 헤더에 포함시켜 응답
3. 클라이언트의 재 요청시 쿠키가 존재하면 헤더에 포함시켜 요청
4. 서버에서 쿠키에 변경사항이 생긴 경우 업데이트 한 뒤 헤더에 포함시켜 응답

<br>

### Session이란?

Cookie와 같은 역할을 하지만 Cookie 단점인 보안에 취약함을 보완할 수 있는 방식으로 Cookie와 달리 서버에 정보를 저장한다. 서버에 자원을 사용하기 때문에 무분별하게 사용될 수 없다는 것을 감안하고 사용해야 한다.

<br>

### Session의 특징

- Cookie와 유사한 역할
- 보안에 강함(서버에 저장되며 브라우저가 종료되거나 만료될시 삭제됨, 사용자정보가 아닌 식별자 정보만을 전송함)
- 주로 로그인 유지에 사용
- 서버에 메모리를 점유

<br>

### Session의 동작방식

1. 클라이언트가 서버에 접속시 HTTP 헤더 Set-Cookie 필드에 세션 ID를 발급하여 응답한다.
2. 클라이언트는 세션 ID를 쿠키에 임시 저장하거나, 쿠키가 지원되지 않는 경우 URL 끝에 붙여 가지게 된다.
3. 클라이언트는 재요청시 헤더 쿠키에 세션 ID를 포함하여 서버에 요청한다.
4. 서버는 클라이언트로 부터 받은 세션 ID를 통해 사용자를 식별한다.
